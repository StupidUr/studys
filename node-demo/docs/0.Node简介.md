Node简介

### Node介绍
Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行环境。 Node.js 使用了一个事件驱动、非阻塞式异步 I/O 的模型。  
Node 是一个让 JavaScript 运行在服务端的开发平台，它让 JavaScript 成为与PHP、Python、Perl、Ruby 等服务端语言平起平坐的脚本语言。发布于2009年5月，由Ryan Dahl开发，实质是对Chrome V8引擎进行了封装。
Node对一些特殊用例进行优化，提供替代的API，使得V8在非浏览器环境下运行得更好。V8引擎执行Javascript的速度非常快，性能非常好。Node是一个基于Chrome JavaScript运行时建立的平台， 用于方便地搭建响应速度快、易于扩展的网络应用。Node 使用事件驱动， 非阻塞I/O 模型而得以轻量和高效，非常适合在分布式设备上运行数据密集型的实时应用。

### 特点
NodeJS的优缺点

优点：

1、高并发
    * 针对每个并发请求，服务端给请求注册一个激发事件（I/O），并给一个回调函数（这个过程没有阻塞新的连接请求）。按顺序执行事件处理（I/O），处理完成后执行回调函数，接着执行下一个事件处理（I/O）

2、适合I/O密集型应用
    * 事件处理（即异步I/O处理）是由node工作线程去执行的（nodejs底层的libuv是由多线程的线程池并行I/O操作），且主线程是不需要等待返回的，只要发出指令后就可以执行其他事件，所有操作完成后执行回调。

缺点：

1、不适合CPU密集型应用，只支持单核CPU，不能充分利用CPU
    * 原因，由于JavaScript单线程的原因，如果有长时间运行的计算（比如大循环），将会导致CPU时间片不能释放，使得后续I/O无法发起。
    * 解决方案：分解大型运算任务为多个小任务，使得运算能够适时释放，不阻塞I/O调用的发起。

2、单进程，单线程，一旦代码某处出现bug，整个系统都崩溃
    * Nnigx反向代理，负载均衡，开多个进程，绑定多个端口；开多个进程监听同一个端口，使用cluster模块。

### Node适合场景

1、为什么nodejs为什么只适合做中间层？
不妨换个思维，nodejs去做业务层、数据层会怎样？我用纯nodejs做过应用，发现业务逻辑层太难写了，由于nodejs天生的语言缺陷，复杂的逻辑在碰到一堆callback的时候代码简直没法看，即使用了promise之类的库，也没法完全弥补这个缺陷。大型的网站架构非常注重可维护性，代码可读性低，可维护性自然低了。

2、为什么撼动不了java的地位？
两者的定位本来就不同，为什么要取代呢？两个语言存在不一定要是你死我活的，大型it项目往往是多语言结合的，取长补短，复杂的业务逻辑用java来做，用nodejs处理一些路由映射和参数校验，前端工程师也能部分参与后台工程师的工作，这样项目可扩展性其实更好。

### 详细解释
node或者说js的特性（单线程，异步，弱类型）决定了它比较适合快速的做简单的东西，你可以不用考虑很多底层的东西，不用考虑数据类型转换，完全不用应用服务器，很快就做出一个应用。但是当应用的体积庞大之后，有一些问题就会暴露出来。这里不说效率，单单是代码的可维护性上，就差java很多。相对来说，java限制比较多，语法比较严格，但这些限制决定了java的程序都会有个风格比较一致的外表，比较容易阅读和维护。
像java、python这个可以具有多线程的语言。多线程同步模式是这样的，将cpu分成几个线程，每个线程同步运行。

![](http://q644ctb89.bkt.clouddn.com/mweb/15869169097091.jpg)

而node.js采用单线程异步非阻塞模式，也就是说每一个计算独占cpu，遇到I/O请求不阻塞后面的计算，当I/O完成后，以事件的方式通知，继续执行计算。

![](http://q644ctb89.bkt.clouddn.com/mweb/15869169454671.jpg)


